/*
This file is part of Cuidando Bem.

    Cuidando Bem is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Cuidando Bem is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Cuidando Bem.  If not, see <http://www.gnu.org/licenses/>.
*/

define(["Stage","levelsData","commandBar","dialogModal","interactiveObjects","modalScene","scene","endOfLevel","Prontuario","Pulseira","FreqRespiratoria","EquipoGotejamento"],function(e,t,n,r,i,s,o,u,a,f,l,c){function x(e,t){this.title=e,this.score=t}function T(){o.init(p),s.init(p),i.init(p),u.init(p),a.init(p),f.init(p),l.init(p),c.init(p),r.init(p),n.init(p),L(t.getCurrentLevel()),O(),n.hide()}function N(e){A(e)}function C(){I(),L(t.getCurrentLevel()),O()}function k(){return d}function L(e){d=e.getClone(),f.resetData(),d.setup(),r.close(),w=d.getCurrentSceneId()}function A(e){t.setCurrentLevel(e),L(t.getCurrentLevel()),O()}function O(){d.setCurrentSceneById(w),v=d.getCurrentScene(),m=d.getActions(w),y=d.getDialogs(w),g=d.getInteractiveObjects(w),b=d.getFlags(),E=[],o.setScene(v),n.changeToActionsButtons(m),i.changeToInteractiveObjects(g),v.load()}function M(e){var t=v;d.setCurrentSceneById(e),v=d.getCurrentScene(),w=e,m=d.getActions(w),y=d.getDialogs(w),g=d.getInteractiveObjects(w),b=d.getFlags(),t.unload(),o.changeScene(v),n.changeToActionsButtons(m),i.changeToInteractiveObjects(g),v.load()}function _(e){var t=d.getModalScene(e);v=t,s.open(t),n.changeToActionsButtons(t.getActions()),i.changeToInteractiveObjects(t.getInteractiveObjects())}function D(){s.close(),n.changeToActionsButtons(m),i.changeToInteractiveObjects(g),v=d.getCurrentScene()}function P(){n.show()}function H(){n.hide()}function B(e){var t=y[e];r.show(t),S.play(S.audios.sfx.avancarMensagens),q(),R(),H()}function j(){r.close(),S.play(S.audios.sfx.avancarMensagens),z(),U(),P()}function F(){u.show(E,d.getMaxPoints())}function I(){u.close()}function q(){n.disableAllActionButtons(m)}function R(){i.disableAllInteractiveObjects(g)}function U(){i.updateAllInteractiveObjects(g)}function z(){n.updateAllActionButtons(m)}function W(e){var t=v.getAction(e);t.setEnable(!1),n.disableActionButton(t)}function X(e){var t=v.getAction(e);t.setEnable(!0),n.enableActionButton(t)}function V(e){var t=v.getInteractiveObject(e);t.setEnable(!1),i.disableInteractiveObject(t)}function J(e){var t=v.getInteractiveObject(e);t.setEnable(!0),i.enableInteractiveObject(t)}function K(e){return d.getFlag(e)}function Q(e,t){if(!t)return d.getFlag(e).getValue();d.getFlag(e).setValue(t)}function G(e,t){d.setFlag(e,t)}function Y(e,t){var n=v.getAction(e);t?X(n):W(n)}function Z(e,t){var r=v.getAction(e);r.setVisibility(t),n.setActionVisible(r,t)}function et(e){var t=v.getAction(e);t.isVisible()?t.setVisibility(!1):t.setVisibility(!0),n.setActionVisible(t,t.isVisible())}function tt(e,t){var n=v.getInteractiveObject(e);n.setVisibility(t),i.setInteractiveObjectVisible(n,t)}function nt(e){var t=v.getInteractiveObject(e);t.isVisible()?t.setVisibility(!1):t.setVisibility(!0),i.setInteractiveObjectVisible(t,t.isVisible())}function rt(e){E.push(e),h.addScore(t.getCurrentLevelId(),e)}function it(){e.changeScreen(6)}function st(e){var t="."+v.getCssClass(),n="."+e;$(t).addClass(e),$(n).removeClass(v.getCssClass()),v.setCssClass(e)}function ot(e){h.unlockLevel(e)}var h=require("Storage"),p="#gameStage",d,v,m,g,y,b,w,E,S=require("Player"),ut={init:T,start:N,restartLevel:C,changeScene:M,changeLevelTo:A,openDialog:B,closeDialog:j,openModalScene:_,closeModalScene:D,showEndOfLevel:F,closeEndOfLevel:I,openCommandBar:P,closeCommandBar:H,unlockLevel:ot,enableActionButton:X,disableActionButton:W,enableInteractiveObject:J,disableInteractiveObject:V,setActionEnable:Y,getCurrentLevel:k,getFlag:K,setFlag:G,flag:Q,setActionVisible:Z,toggleActionVisible:et,setInteractiveObjectVisible:tt,toggleInteractiveObjectVisible:nt,registerScoreItem:rt,disableAllActionButtons:q,updateAllActionButtons:z,disableAllInteractiveObjects:R,updateAllInteractiveObjects:U,goBackToMenu:it,changeSceneCssClassTo:st};return ut});