/*
This file is part of Cuidando Bem.

    Cuidando Bem is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Cuidando Bem is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Cuidando Bem.  If not, see <http://www.gnu.org/licenses/>.
*/

define(["Stage","levelsData","commandBar","dialogModal","interactiveObjects","modalInteractiveObjects","modalScene","scene","endOfLevel","Prontuario","Pulseira","FreqRespiratoria","EquipoGotejamento","Ficha"],function(e,t,n,i,c,o,s,a,l,r,u,g,b,v){function d(){a.init(se),c.init(se),s.init(se),o.init(se),l.init(se),r.init(se),u.init(se),g.init(se),b.init(se),v.init(se),i.init(se),n.init(se),O(t.getCurrentLevel()),C()}function f(e){j(e)}function A(){F(),O(t.getCurrentLevel()),C()}function I(){return Y}function O(e){Y=e.getClone(),u.resetData(),Y.setup(),i.close(),ie=Y.getCurrentSceneId()}function j(e){t.setCurrentLevel(e),O(t.getCurrentLevel()),C()}function C(){Y.setCurrentSceneById(ie),Z=Y.getCurrentScene(),_=Y.getActions(ie),te=Y.getDialogs(ie),ee=Y.getInteractiveObjects(ie),ne=Y.getFlags(),ce=[],a.setScene(Z),n.changeToActionsButtons(_),c.changeToInteractiveObjects(ee),l.close(),r.close(),u.close(),g.close(),b.close(),v.close(),i.close(),n.hide(),Z.load()}function h(e){var t=Z;Y.setCurrentSceneById(e),Z=Y.getCurrentScene(),ie=e,_=Y.getActions(ie),te=Y.getDialogs(ie),ee=Y.getInteractiveObjects(ie),ne=Y.getFlags(),t.unload(),a.changeScene(Z),n.changeToActionsButtons(_),c.changeToInteractiveObjects(ee),Z.load()}function S(e){var t=Y.getModalScene(e);Z=t,s.open(t),o.open(),n.changeToActionsButtons(t.getActions()),c.disableAllInteractiveObjects(ee),o.changeToInteractiveObjects(t.getInteractiveObjects())}function V(){s.close(),o.close(),n.changeToActionsButtons(_),o.removeAllInteractiveObjects(),c.updateAllInteractiveObjects(ee),Z=Y.getCurrentScene()}function p(){n.show()}function B(){n.hide()}function m(e){var t=te[e];i.show(t),ae.play(ae.audios.sfx.avancarMensagens),T(),E(),B()}function y(){i.close(),ae.play(ae.audios.sfx.avancarMensagens),D(),M(),p()}function L(){l.show(ce,Y.getMaxPoints())}function F(){l.close()}function T(){n.disableAllActionButtons(_)}function E(){c.disableAllInteractiveObjects(ee)}function M(){c.updateAllInteractiveObjects(ee)}function D(){n.updateAllActionButtons(_)}function q(e){var t=Z.getAction(e);t.setEnable(!1),n.disableActionButton(t)}function w(e){var t=Z.getAction(e);t.setEnable(!0),n.enableActionButton(t)}function P(e){var t=Z.getInteractiveObject(e);t.setEnable(!1),c.disableInteractiveObject(t)}function k(e){var t=Z.getInteractiveObject(e);t.setEnable(!0),c.enableInteractiveObject(t)}function x(e){return Y.getFlag(e)}function G(e,t){return"undefined"==typeof t?Y.getFlag(e).getValue():void Y.getFlag(e).setValue(t)}function R(e,t){Y.setFlag(e,t)}function z(e,t){var n=Z.getAction(e);"undefined"!=typeof t?w(n):q(n)}function H(e,t){var i=Z.getAction(e);i.setVisibility(t),n.setActionVisible(i,t)}function J(e){var t=Z.getAction(e);t.isVisible()?t.setVisibility(!1):t.setVisibility(!0),n.setActionVisible(t,t.isVisible())}function K(e,t){var n=Z.getInteractiveObject(e);n.setVisibility(t),c.setInteractiveObjectVisible(n,t)}function N(e){var t=Z.getInteractiveObject(e);t.isVisible()?t.setVisibility(!1):t.setVisibility(!0),c.setInteractiveObjectVisible(t,t.isVisible())}function Q(e){ce.push(e),oe.addScore(t.getCurrentLevelId(),e)}function U(){e.changeScreen(6)}function W(e){var t="."+Z.getCssClass(),n="."+e;$(t).addClass(e),$(n).removeClass(Z.getCssClass()),Z.setCssClass(e)}function X(e){oe.unlockLevel(e)}var Y,Z,_,ee,te,ne,ie,ce,oe=require("Storage"),se="#gameStage",ae=require("Player"),le={init:d,start:f,restartLevel:A,changeScene:h,changeLevelTo:j,openDialog:m,closeDialog:y,openModalScene:S,closeModalScene:V,showEndOfLevel:L,closeEndOfLevel:F,openCommandBar:p,closeCommandBar:B,unlockLevel:X,enableActionButton:w,disableActionButton:q,enableInteractiveObject:k,disableInteractiveObject:P,setActionEnable:z,getCurrentLevel:I,getFlag:x,setFlag:R,flag:G,setActionVisible:H,toggleActionVisible:J,setInteractiveObjectVisible:K,toggleInteractiveObjectVisible:N,registerScoreItem:Q,disableAllActionButtons:T,updateAllActionButtons:D,disableAllInteractiveObjects:E,updateAllInteractiveObjects:M,goBackToMenu:U,changeSceneCssClassTo:W};return le});