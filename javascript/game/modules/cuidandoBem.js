/*
This file is part of Cuidando Bem.

    Cuidando Bem is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Cuidando Bem is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Cuidando Bem.  If not, see <http://www.gnu.org/licenses/>.
*/

define(["Stage","levelsData","commandBar","dialogModal","interactiveObjects","modalScene","scene","endOfLevel","Prontuario","Pulseira","FreqRespiratoria","EquipoGotejamento","Ficha"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){function T(e,t){this.title=e,this.score=t}function N(){o.init(d),s.init(d),i.init(d),u.init(d),a.init(d),f.init(d),l.init(d),c.init(d),h.init(d),r.init(d),n.init(d),A(t.getCurrentLevel()),M()}function C(e){console.group("Game Running:"),O(e)}function k(){console.info("Restarting current level"),q(),A(t.getCurrentLevel()),M()}function L(){return v}function A(e){console.group("Clone Level"),v=e.getClone(),f.resetData(),v.setup(),r.close(),console.groupEnd(),E=v.getCurrentSceneId()}function O(e){t.setCurrentLevel(e),A(t.getCurrentLevel()),M()}function M(){console.group("Starting level:"+v.getName(),!0),v.setCurrentSceneById(E),m=v.getCurrentScene(),g=v.getActions(E),b=v.getDialogs(E),y=v.getInteractiveObjects(E),w=v.getFlags(),S=[],o.setScene(m),n.changeToActionsButtons(g),n.hide(),c.close(),h.close(),i.changeToInteractiveObjects(y),m.load(),console.groupEnd()}function _(e){var t=m;v.setCurrentSceneById(e),m=v.getCurrentScene(),console.group("Change Scene to: "+m.getName(),!0),E=e,g=v.getActions(E),b=v.getDialogs(E),y=v.getInteractiveObjects(E),w=v.getFlags(),t.unload(),o.changeScene(m),n.changeToActionsButtons(g),i.changeToInteractiveObjects(y),m.load(),console.groupEnd()}function D(e){var t=v.getModalScene(e);m=t,s.open(t),n.changeToActionsButtons(t.getActions()),i.changeToInteractiveObjects(t.getInteractiveObjects())}function P(){s.close(),n.changeToActionsButtons(g),i.changeToInteractiveObjects(y),m=v.getCurrentScene()}function H(){n.show()}function B(){n.hide()}function j(e){var t=b[e];r.show(t),x.play(x.audios.sfx.avancarMensagens),R(),U(),B()}function F(){r.close(),x.play(x.audios.sfx.avancarMensagens),W(),z(),H()}function I(){u.show(S,v.getMaxPoints())}function q(){u.close()}function R(){n.disableAllActionButtons(g)}function U(){i.disableAllInteractiveObjects(y)}function z(){i.updateAllInteractiveObjects(y)}function W(){n.updateAllActionButtons(g)}function X(e){var t=m.getAction(e);t.setEnable(!1),n.disableActionButton(t)}function V(e){var t=m.getAction(e);t.setEnable(!0),n.enableActionButton(t)}function J(e){var t=m.getInteractiveObject(e);t.setEnable(!1),i.disableInteractiveObject(t)}function K(e){var t=m.getInteractiveObject(e);t.setEnable(!0),i.enableInteractiveObject(t)}function Q(e){return v.getFlag(e)}function G(e,t){if(typeof t=="undefined")return v.getFlag(e).getValue();v.getFlag(e).setValue(t)}function Y(e,t){v.setFlag(e,t)}function Z(e,t){var n=m.getAction(e);typeof t!="undefined"?V(n):X(n)}function et(e,t){var r=m.getAction(e);r.setVisibility(t),n.setActionVisible(r,t)}function tt(e){var t=m.getAction(e);t.isVisible()?t.setVisibility(!1):t.setVisibility(!0),n.setActionVisible(t,t.isVisible())}function nt(e,t){var n=m.getInteractiveObject(e);n.setVisibility(t),i.setInteractiveObjectVisible(n,t)}function rt(e){var t=m.getInteractiveObject(e);t.isVisible()?t.setVisibility(!1):t.setVisibility(!0),i.setInteractiveObjectVisible(t,t.isVisible())}function it(e){S.push(e),p.addScore(t.getCurrentLevelId(),e)}function st(){e.changeScreen(6)}function ot(e){var t="."+m.getCssClass(),n="."+e;$(t).addClass(e),$(n).removeClass(m.getCssClass()),m.setCssClass(e)}function ut(e){p.unlockLevel(e)}var p=require("Storage"),d="#gameStage",v,m,g,y,b,w,E,S,x=require("Player"),at={init:N,start:C,restartLevel:k,changeScene:_,changeLevelTo:O,openDialog:j,closeDialog:F,openModalScene:D,closeModalScene:P,showEndOfLevel:I,closeEndOfLevel:q,openCommandBar:H,closeCommandBar:B,unlockLevel:ut,enableActionButton:V,disableActionButton:X,enableInteractiveObject:K,disableInteractiveObject:J,setActionEnable:Z,getCurrentLevel:L,getFlag:Q,setFlag:Y,flag:G,setActionVisible:et,toggleActionVisible:tt,setInteractiveObjectVisible:nt,toggleInteractiveObjectVisible:rt,registerScoreItem:it,disableAllActionButtons:R,updateAllActionButtons:W,disableAllInteractiveObjects:U,updateAllInteractiveObjects:z,goBackToMenu:st,changeSceneCssClassTo:ot};return at});