/*
 This file is part of Cuidando Bem.

 Cuidando Bem is free software: you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 Cuidando Bem is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with Cuidando Bem.  If not, see <http://www.gnu.org/licenses/>.
 */

define(["text!../html/prontuario/prontuario.html"],function(t){function e(){return lt}function a(){return st}function o(){return ut}function i(){return dt}function r(){return ft}function c(){return pt}function n(){return xt}function l(){return wt}function s(){return _t}function u(){return ht}function d(){return vt}function f(){return bt}function p(){return gt}function x(){return At}function w(){return Dt}function _(){return Mt}function h(t){lt=t,$(Rt).text(lt)}function v(t){st=t,$(St).text(st)}function b(t){ut=t,$(Bt).text(ut)}function g(t){dt=t,$(It).text(dt)}function k(t){ft=t,$(qt).text(ft)}function m(t){pt=t,$(yt).text(pt)}function E(t){xt=t,$(Nt).text(xt)}function X(t){wt=t,$(Ct).text(wt)}function A(t){_t=t,$(Ot).text(_t)}function D(t){ht=t,$(Vt).text(ht)}function M(t){vt=t,$(Ht).text(vt)}function P(t){bt=t,$(Lt).text(bt)}function R(t){gt=t,$(zt).text(gt)}function S(t,e){Et=t,t?($(Tt).text(Qt),$(Jt).text(Kt),kt=e,$(Ft).val(e),$(Ft).show()):($(Tt).text(Kt),$(Jt).text(Qt),$(Ft).hide())}function B(t){Ut=t,$(Ft).prop("disabled",Ut)}function I(t){At=t,$(Wt).text(At)}function q(t){Dt=t,$(Yt).text(Dt)}function y(t){Mt=t,$(Zt).text(Mt)}function N(t,e,a,o,i,r,c,n){if(n=n||!1,0>t||t>Re.length)throw new Error("Invalid row index");Re[t].disabled=n,Re[t].data=e,Re[t].pa=a,Re[t].fc=o,Re[t].fr=i,Re[t].sat=r,Re[t].temp=c,$($(Ee,me)[t]).text(e),$($(Xe,me)[t]).val(a),$($(Ae,me)[t]).val(o),$($(De,me)[t]).val(i),$($(Me,me)[t]).val(r),$($(Pe,me)[t]).val(c),$($(Xe,me)[t]).prop("disabled",n),$($(Ae,me)[t]).prop("disabled",n),$($(De,me)[t]).prop("disabled",n),$($(Me,me)[t]).prop("disabled",n),$($(Pe,me)[t]).prop("disabled",n)}function C(t,e,a,o,i,r,c){if(0>t||t>Re.length)throw new Error("Invalid row index");Se[t].pa=a,Se[t].fc=o,Se[t].fr=i,Se[t].sat=r,Se[t].temp=c}function O(t,e){ye=t,Ce=e,$($(Ie,Be)[0]).val(t),$($(qe,Be)[0]).text(e)}function V(t){var e=$($(qe,Be)[0]).text();$($(qe,Be)[0]).text(e+t)}function H(t,e){Ne=t,Oe=e}function L(t,e,a,o,i,r,c,n){if(0>t||t>ne.length)throw new Error("Invalid row index");ne[t].disabled=n,ne[t].data=e,ne[t].medicacao=a,ne[t].via=o,ne[t].posologia=i,ne[t].horario=r,ne[t].relatorio=c,$($(ee,te)[t]).text(e),$($(ae,te)[t]).text(a),$($(oe,te)[t]).text(o),$($(ie,te)[t]).text(i),$($(re,te)[t]).text(r),ne[t].relatorio?$($(ce,te)[t]).text("(x)"):$($(ce,te)[t]).text("( )"),n&&$($(ce,te)[t]).addClass("disabled")}function z(t,e){if(0>t||t>ne.length)throw new Error("Invalid row index");$e[t]=e}function T(t){$("tr",ke).hide();var e;$.each(le,function(t,e){le[t]=!1}),t.forEach(function(t){prescEnfermagemState=t,le[prescEnfermagemState]=!0,$("."+prescEnfermagemState,ke).show()}),e=$(".decubito",ke),se=[!1,!1,!1],$(".check",e).text("( )"),$(".opcao",e).unbind("click"),le.decubito&&$(".opcao",e).click({container:e},function(t){e=t.data.container;var a=$(".opcao",e).index(this);se=[!1,!1,!1],se[a]=!0,$(".check",e).text("( )"),$($(".check",e)[a]).text("(X)")}),e=$(".verificar_glicemia",ke),ue=!1,$(".check",e).text("( )"),$(".opcao",e).unbind("click"),le.verificar_glicemia&&$(".opcao",e).click({container:e},function(t){e=t.data.container,ue=!ue,ue?$(".check",e).text("(X)"):$(".check",e).text("( )")}),e=$(".verificar_glicemia2",ke),de=!1,$(".check",e).text("( )"),$(".opcao",e).unbind("click"),le.verificar_glicemia2&&$(".opcao",e).click({container:e},function(t){e=t.data.container,de=!de,de?$(".check",e).text("(X)"):$(".check",e).text("( )")}),e=$(".levantar_grade",ke),fe=!1,$(".check",e).text("( )"),$(".opcao",e).unbind("click"),le.levantar_grade&&$(".opcao",e).click({container:e},function(t){e=t.data.container,fe=!fe,fe?$(".check",e).text("(X)"):$(".check",e).text("( )")}),e=$(".encaminhar_paciente_cc",ke),pe=!1,$(".check",e).text("( )"),$(".opcao",e).unbind("click"),le.encaminhar_paciente_cc&&$(".opcao",e).click({container:e},function(t){e=t.data.container,pe=!pe,pe?$(".check",e).text("(X)"):$(".check",e).text("( )")}),e=$(".check_list_cirurgia",ke),xe=!1,$(".check",e).text("( )"),$(".opcao",e).unbind("click"),le.check_list_cirurgia&&$(".opcao",e).click({container:e},function(t){e=t.data.container,xe=!xe,xe?$(".check",e).text("(X)"):$(".check",e).text("( )")}),e=$(".placa_neutra",ke),we=[!1,!1,!1],$(".check",e).text("( )"),$(".opcao",e).unbind("click"),le.placa_neutra&&$(".opcao",e).click({container:e},function(t){e=t.data.container;var a=$(".opcao",e).index(this);we=[!1,!1,!1],we[a]=!0,$(".check",e).text("( )"),$($(".check",e)[a]).text("(X)")}),e=$(".placa_neutra2",ke),_e=[!1,!1,!1],$(".check",e).text("( )"),$(".opcao",e).unbind("click"),le.placa_neutra2&&$(".opcao",e).click({container:e},function(t){e=t.data.container;var a=$(".opcao",e).index(this);_e=[!1,!1,!1],_e[a]=!0,$(".check",e).text("( )"),$($(".check",e)[a]).text("(X)")}),e=$(".risco_infeccao",ke),he=!1,$(".check",e).text("( )"),$(".opcao",e).unbind("click"),le.risco_infeccao&&$(".opcao",e).click({container:e},function(t){e=t.data.container,he=!he,he?$(".check",e).text("(X)"):$(".check",e).text("( )")}),e=$(".troca_curativo",ke),ve=!1,$(".check",e).text("( )"),$(".opcao",e).unbind("click"),le.troca_curativo&&$(".opcao",e).click({container:e},function(t){e=t.data.container,ve=!ve,ve?$(".check",e).text("(X)"):$(".check",e).text("( )")}),e=$(".nutricao_desequilibrada",ke),be=!1,$(".check",e).text("( )"),$(".opcao",e).unbind("click"),le.nutricao_desequilibrada&&$(".opcao",e).click({container:e},function(t){e=t.data.container,be=!be,be?$(".check",e).text("(X)"):$(".check",e).text("( )")}),e=$(".manutencao_sonda_nasogastrica",ke),ge=!1,$(".check",e).text("( )"),$(".opcao",e).unbind("click"),le.manutencao_sonda_nasogastrica&&$(".opcao",e).click({container:e},function(t){e=t.data.container,ge=!ge,ge?$(".check",e).text("(X)"):$(".check",e).text("( )")})}function j(e){$(e).append(t),$(jt).click(function(){Ut||(Et=!0,$(Tt).text("X"),$(Jt).text("   "),$(Ft).show())}),$(Gt).click(function(){Ut||(Et=!1,$(Jt).text("X"),$(Tt).text("   "),$(Ft).hide())}),$(ce,te).click(function(){var t=$(ce,te).index(this);ne[t].disabled||(ne[t].relatorio=!ne[t].relatorio,ne[t].relatorio?$(this).text("(x)"):$(this).text("( )"))}),$(".content").tabs()}function F(){return $("#pauseMenu").is(":visible")?(Z=$("#pauseMenu .button"),"pause"):$("#commandBar").is(":visible")?(Z=$.merge($("#prontuario .outerBlock:visible input:enabled"),$("#commandBar .action_button[class!='disabled']:visible")),"inputsAndActions"):(Z=$("#prontuario .outerBlock:visible input:enabled"),"inputsOnly")}function G(t){op=F();var e=$("#prontuario li.ui-state-default:visible a");if(t==ot)return Ve>=Z.length-1?Ve=0:Ve++,$(Z[Ve]).focus(),!1;if(t==et)return Ve>0?Ve--:Ve=Z.length-1,$(Z[Ve]).focus(),!1;if(t==at)return He>=e.length-1?He=0:He++,$(e[He]).click(),Ve=0,!1;if(t==tt)return He>0?He--:He=e.length-1,$(e[He]).click(),Ve=0,!1;if(t==it){if(-1!=Ve)return $(Z[Ve]).click(),!1}else if($("#pauseButton").is(":visible")&&t==rt)return $("#pauseButton").click(),!1}function J(){$(window).off("keydown"),$(window).on("keydown",function(t){return!$("#dialogBar").is(":visible")||$("#pauseMenu").is(":visible")?G(t.which):t.which==et&&$(".dialog_reread").is(":visible")?($(".dialog_reread").click(),!1):t.which==ot&&$(".dialog_right").is(":visible")?($(".dialog_right").click(),!1):t.which==ct&&$(".dialog_button[value='1']").is(":visible")?($(".dialog_button[value='1']").click(),!1):t.which==nt&&$(".dialog_button[value='2']").is(":visible")?($(".dialog_button[value='2']").click(),!1):t.which==$t&&$(".dialog_button[value='3']").is(":visible")?($(".dialog_button[value='3']").click(),!1):$("#pauseButton").is(":visible")&&t.which==rt?($("#pauseButton").click(),!1):void 0})}function K(t){for($(Pt).show(),row=0;row<Re.length;row++){Re[row].disabled;$($(Xe,me)[row]).mask("000x000"),$($(Ae,me)[row]).mask("000"),$($(De,me)[row]).mask("000"),$($(Me,me)[row]).mask("000"),$($(Pe,me)[row]).mask("00.0")}Q();var e=0;switch(t){case"internacao":e=1;break;case"prescMedica":e=2;break;case"prescEnfermagem":e=3;break;case"sinaisVitais":e=4;break;case"anotacoes":e=5;break;case"paciente":default:e=0}$(".content").tabs("option","active",e),J()}function Q(){for($(Rt).text(lt),$(St).text(st),$(Bt).text(ut),$(It).text(dt),$(qt).text(ft),$(yt).text(pt),$(Nt).text(xt),$(Ct).text(wt),$(Ot).text(_t),$(Vt).text(ht),$(Ht).text(vt),$(Lt).text(bt),$(zt).text(gt),$(Wt).text(At),$(Yt).text(Dt),$(Zt).text(Mt),$(Ft).prop("disabled",Ut),Et?($(Tt).text(Qt),$(Jt).text(Kt),$(Ft).val(kt),$(Ft).show()):($(Tt).text(Kt),$(Jt).text(Qt),$(Ft).hide()),row=0;row<ne.length;row++)$($(ee,te)[row]).text(ne[row].data),$($(ae,te)[row]).text(ne[row].medicacao),$($(oe,te)[row]).text(ne[row].via),$($(ie,te)[row]).text(ne[row].posologia),$($(re,te)[row]).text(ne[row].horario),ne[row].relatorio?$($(ce,te)[row]).text("(x)"):$($(ce,te)[row]).text("( )");for(row=0;row<Re.length;row++){var t=Re[row].disabled;$($(Ee,me)[row]).text(Re[row].data),$($(Xe,me)[row]).val(Re[row].pa),$($(Ae,me)[row]).val(Re[row].fc),$($(De,me)[row]).val(Re[row].fr),$($(Me,me)[row]).val(Re[row].sat),$($(Pe,me)[row]).val(Re[row].temp),$($(Xe,me)[row]).prop("disabled",t),$($(Ae,me)[row]).prop("disabled",t),$($(De,me)[row]).prop("disabled",t),$($(Me,me)[row]).prop("disabled",t),$($(Pe,me)[row]).prop("disabled",t)}$($(Ie,Be)[0]).val(ye),$($(qe,Be)[0]).val(Ce)}function U(){for(lt=$(Rt).text(),st=$(St).text(),ut=$(Bt).text(),dt=$(It).text(),ft=$(qt).text(),pt=$(yt).text(),xt=$(Nt).text(),wt=$(Ct).text(),_t=$(Ot).text(),ht=$(Vt).text(),vt=$(Ht).text(),bt=$(Lt).text(),gt=$(zt).text(),At=$(Wt).text(),Dt=$(Yt).text(),Mt=$(Zt).text(),row=0;row<ne.length;row++)ne[row].data=$($(ee,te)[row]).text(),ne[row].medicacao=$($(ae,te)[row]).text(),ne[row].via=$($(oe,te)[row]).text(),ne[row].posologia=$($(ie,te)[row]).text(),ne[row].horario=$($(re,te)[row]).text();for(row=0;row<Re.length;row++){Re[row].disabled;Re[row].data=$($(Ee,me)[row]).text(),Re[row].pa=$($(Xe,me)[row]).val(),Re[row].fc=$($(Ae,me)[row]).val(),Re[row].fr=$($(De,me)[row]).val(),Re[row].sat=$($(Me,me)[row]).val(),Re[row].temp=$($(Pe,me)[row]).val()}ye=$($(Ie,Be)[0]).val(),Ce=$($(qe,Be)[0]).val()}function W(){U(),$(Pt).hide()}function Y(){var t;if(!Ut){if(Xt!=Et)return!1;if(Et&&!mt.test(kt))return!1}for(t=0;t<ne.length;t++)if(!ne[t].disabled&&!ne[t].relatorio)return!1;if(le.decubito&&!se[1])return!1;if(le.verificar_glicemia&&!ue)return!1;if(le.verificar_glicemia2&&!de)return!1;if(le.levantar_grade&&!fe)return!1;if(le.encaminhar_paciente_cc&&!pe)return!1;if(le.check_list_cirurgia&&!xe)return!1;if(le.placa_neutra&&!we[1])return!1;if(le.placa_neutra2&&!_e[0])return!1;if(le.risco_infeccao&&!he)return!1;if(le.troca_curativo&&!ve)return!1;if(le.nutricao_desequilibrada&&!be)return!1;if(le.manutencao_sonda_nasogastrica&&!ge)return!1;for(t=0;t<Re.length;t++)if(!Re[t].disabled){if(pa=$($(Xe,me)[t]).val(),fc=$($(Ae,me)[t]).val(),fr=$($(De,me)[t]).val(),sat=$($(Me,me)[t]).val(),temp=$($(Pe,me)[t]).val(),!Se[t].pa.test(pa))return!1;if(!Se[t].fc.test(fc))return!1;if(!Se[t].fr.test(fr))return!1;if(!Se[t].sat.test(sat))return!1;if(!Se[t].temp.test(temp))return!1}return!0}var Z=null;const tt=37,et=38,at=39,ot=40,it=13,rt=27,ct=49,nt=50,$t=51;var lt,st,ut,dt,ft,pt,xt,wt,_t,ht,vt,bt,gt,kt,mt,Et,Xt,At,Dt,Mt,Pt="#prontuario",Rt="#pront_nome",St="#pront_data_nascimento",Bt="#pront_idade",It="#pront_sexo",qt="#pront_estado_civil",yt="#pront_profissao",Nt="#pront_nome_pai",Ct="#pront_nome_mae",Ot="#pront_data_internacao",Vt="#pront_numero_leito",Ht="#pront_antecedentes",Lt="#pront_hipotese_diagnostica",zt="#pront_observacoes",Tt="#pront_alergia_spanSim",jt="#pront_alergia_divSim",Ft="#pront_alergia_qual",Gt="#pront_alergia_divNao",Jt="#pront_alergia_spanNao",Kt="   ",Qt="X",Ut=!1,Wt="#pront_peso",Yt="#pront_altura",Zt="#pront_circunferencia_abdominal",te="#prescMedica_tbody",ee=".data",ae=".medicacao",oe=".via",ie=".posologia",re=".horario",ce=".relatorio",ne=[{disabled:!1,data:"",medicacao:"",via:"",posologia:"",horario:"",relatorio:!1},{disabled:!1,data:"",medicacao:"",via:"",posologia:"",horario:"",relatorio:!1},{disabled:!1,data:"",medicacao:"",via:"",posologia:"",horario:"",relatorio:!1},{disabled:!1,data:"",medicacao:"",via:"",posologia:"",horario:"",relatorio:!1}],$e=[{relatorio:""},{relatorio:""}],le={vazio:!1,decubito:!1,decubito_visual:!1,verificar_glicemia:!1,verificar_glicemia2:!1,verificar_glicemia3:!1,levantar_grade:!1,encaminhar_paciente_cc:!1,check_list_cirurgia:!1,placa_neutra:!1,placa_neutra2:!1,risco_infeccao:!1,troca_curativo:!1,nutricao_desequilibrada:!1,manutencao_sonda_nasogastrica:!1,desiquilibrio_eletrolitico:!1,desiquilibrio_eletrolitico_fase9:!1},se=[!1,!1,!1],ue=!1,de=!1,fe=!1,pe=!1,xe=!1,we=[!1,!1,!1],_e=[!1,!1,!1],he=!1,ve=!1,be=!1,ge=!1,ke="#prescEnfermagem_tbody",me="#ssvv_tbody",Ee=".data",Xe=".pa",Ae=".fc",De=".fr",Me=".sat",Pe=".temp",Re=[{disabled:!1,data:"",pa:"",fc:"",fr:"",sat:"",temp:""},{disabled:!1,data:"",pa:"",fc:"",fr:"",sat:"",temp:""}],Se=[{data:"",pa:"",fc:"",fr:"",sat:"",temp:""},{data:"",pa:"",fc:"",fr:"",sat:"",temp:""}],Be="#anotacaoEnfermagem_tbody",Ie=".data",qe=".anotacao",ye="",Ne="",Ce="",Oe="",Ve=0,He=0;return window.Prontuario={open:K,close:W,isDataValid:Y},{init:j,open:K,close:W,isDataValid:Y,updateData:Q,getNome:e,getDataNascimento:a,getIdade:o,getSexo:i,getEstadoCivil:r,getProfissao:c,getPai:n,getMae:l,getDataInternacao:s,getLeito:u,getAntecedentes:d,getHipotese:f,getObservacoes:p,getPeso:x,getAltura:w,getCircunferenciaAbdominal:_,setNome:h,setDataNascimento:v,setIdade:b,setAlergiaMedicamentosa:S,setDisableAlergiaMedicamentosa:B,setSexo:g,setEstadoCivil:k,setProfissao:m,setPai:E,setMae:X,setDataInternacao:A,setLeito:D,setAntecedentes:M,setHipotese:P,setObservacoes:R,setPeso:I,setAltura:q,setCircunferenciaAbdominal:y,setPrescEnfermagemState:T,addToRelatorio:V,setSsvvRowData:N,setSsvvRowRegExp:C,setAnotacaoEnfermagemRowData:O,setAnotacaoEnfermagemRowRegExp:H,setPrescMedicaRowData:L,setPrescMedicaRowRegExp:z}});