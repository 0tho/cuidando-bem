define([],function(){function e(t){function c(){var t=new e(n);for(scene in r)t.registerScene(r[scene].getClone());for(modal in s)t.registerModalScene(s[modal].getClone());for(flag in u)t.registerFlag(u[flag].getClone());return t.setInitialScene(l),t.setCurrentSceneById(f),t}function h(){return n}function p(e){return m(e).getActions()}function d(e){return m(e).getDialogs()}function v(e){return m(e).getInteractiveObjects()}function m(e){return typeof e=="string"?r[i[e]]:r[e]}function g(e){return typeof e=="string"?s[o[e]]:s[e]}function y(){return u}function b(e){return typeof e=="string"?u[a[e]]:u[e]}function w(){return r[l]}function E(){return r[f]}function S(){return f}function x(e){l=e,f=e}function T(e){f=e}function N(e){i[e.getId()]=r.length,r.push(e)}function C(e){o[e.getId()]=s.length,s.push(e)}function k(e,t){r[t].registerAction(e)}function L(e,t){r[t].registerInteractiveObject(e)}function A(e,t){r[t].registerDialog(e)}function O(e){a[e.getName()]=u.length,u.push(e)}var n=t,r=[],i={},s=[],o={},u=[],a={},f=0,l=0;return{getClone:c,getName:h,getActions:p,getFlag:b,getFlags:y,getInteractiveObjects:v,getDialogs:d,getInitialScene:w,getCurrentScene:E,getCurrentSceneId:S,getScene:m,getModalScene:g,setInitialScene:x,setCurrentSceneById:T,registerScene:N,registerModalScene:C,registerAction:k,registerDialog:A,registerFlag:O,registerInteractiveObject:L}}return e});