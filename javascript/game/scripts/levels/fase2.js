/*
This file is part of Cuidando Bem.

    Cuidando Bem is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Cuidando Bem is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Cuidando Bem.  If not, see <http://www.gnu.org/licenses/>.
*/

define(["levelsData","Scene","Action","Level","Dialog","InteractiveObject","Flag","CuidandoBem","Commons","Pulseira","Prontuario","FreqRespiratoria","ScoresData"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){function k(){u.flag("conversar_recepcionista")==1&&(u.closeDialog(),u.changeScene(1))}function L(){u.openDialog(0)}function A(){u.flag("examinar_paciente")==0?(u.openDialog(10),u.flag("score_ir_posto_hora_errada")==0&&(u.registerScoreItem(h.irPostoEnfermagemHoraErrada),u.flag("score_ir_posto_hora_errada",!0))):u.changeScene(4)}function O(){u.flag("conversar_mentor")==1&&(u.flag("examinar_paciente")==0?u.changeScene(2):u.flag("coxim")==1?u.changeScene(2):u.openDialog(11))}var p=require("DialogsData").fase1,d=require("DialogsData").alertas,v=require("Player");h=h.level1;var m=new r("Level 2");m.setMaxPoints(h._sum);var g,y,b,w,E,S,x,T,N,C;g=a.scenes.recepcao.getClone().onLoad(function(){u.openDialog(0)}),g.registerDialogs([(new i(a.characters.recepcionista)).setText(p.recepcao[0]).registerOption("",function(){u.flag("conversar_recepcionista",!0),u.openDialog(1)}),(new i(a.characters.jogador)).setText(p.recepcao[1]).registerOption("",function(){u.closeDialog()})]),g.registerInteractiveObjects([(new s("intObj-conversar_recepcionista","Conversar com a Recepcionista")).setCssClass("intObj-talkToReceptionist").setVisibility(!0).onClick(L),(new s("io-ir_corredor_esquerda","Ir ao corredor")).setCssClass("intObj-lobbyToHallway-left no-glow").onClick(k).setVisibility(!0),(new s("io-ir_corredor_direita","Ir ao corredor")).setCssClass("intObj-lobbyToHallway-right no-glow").onClick(k).setVisibility(!0)]),y=a.scenes.corredor.getClone().onLoad(function(){v.stopAll(),v.play(v.audios.sfx.abrirPorta),v.playInLoop(v.audios.loops.recepcao),u.flag("conversar_mentor")==0?(u.flag("conversar_mentor",!0),u.openDialog(0)):u.flag("examinar_paciente")==1&&u.flag("conversar_mentor2")==0&&u.openDialog(2)}).onUnload(function(){v.stopAll(),v.play(v.audios.sfx.abrirPorta),v.playInRange(v.audios.musics.inGame)}),y.registerDialogs([(new i(a.characters.mentor)).setText(p.corredor.fala1[0]).registerOption("",function(){u.flag("conversar_mentor",!0),u.openDialog(1)}),(new i(a.characters.jogador)).setText(p.corredor.fala1[1]).registerOption("",function(){u.closeDialog()}),(new i(a.characters.mentor)).setText(p.corredor.fala2[0]).registerOption("",function(){u.openDialog(3)}),(new i(a.characters.jogador)).setText("").registerOption(p.corredor.fala2[1],function(){u.openDialog(6)}).registerOption(p.corredor.fala2[2],function(){u.openDialog(4)}).registerOption(p.corredor.fala2[4],function(){u.openDialog(5)}).setRandomize(!0),(new i(a.characters.mentor)).setText(p.corredor.fala2[3]).registerOption("",function(){u.openDialog(3)}),(new i(a.characters.mentor)).setText(p.corredor.fala2[5]).registerOption("",function(){u.openDialog(3)}),(new i(a.characters.mentor)).setText(p.corredor.fala2[6]).registerOption("",function(){u.openDialog(7)}),(new i(a.characters.jogador)).setText("").registerOption(p.corredor.fala2[7],function(){u.closeDialog(),u.openCommandBar(),u.flag("conversar_mentor2",!0),u.flag("score_falar_com_mentor")==0&&(u.registerScoreItem(h.falarComMentorApos),u.flag("score_falar_com_mentor",!0))}).registerOption(p.corredor.fala2[8],function(){u.openDialog(8)}).registerOption(p.corredor.fala2[10],function(){u.openDialog(9)}).setRandomize(!0),(new i(a.characters.mentor)).setText(p.corredor.fala2[9]).registerOption("",function(){u.openDialog(7)}),(new i(a.characters.mentor)).setText(p.corredor.fala2[11]).registerOption("",function(){u.openDialog(7)}),(new i(a.characters.mentor)).setText(d.enfermariaMasculina).registerOption("",function(){u.closeDialog()}),(new i(a.characters.mentor)).setText(d.perdido.enfermagem[0]).registerOption("",function(){u.closeDialog()})]),y.registerInteractiveObjects([(new s("io-ir_sala_leitos","Ir à Enfermaria Masculina")).setCssClass("intObj-goToBedroom").onClick(O).setVisibility(!0),(new s("io-ir_posto_enfermagem","Ir ao Posto de Enfermagem")).setCssClass("intObj-goToNursingStation").onClick(A).setVisibility(!0),(new s("io-conversar_mentor","Conversar com Mentor")).setCssClass("intObj-talkToMentor").onClick(function(){u.closeCommandBar(),u.flag("examinar_paciente")==0?(u.flag("conversar_mentor",!0),u.openDialog(0)):u.flag("examinar_paciente")==1&&u.openDialog(2)}).setVisibility(!0)]),w=(new t("salaDeLeitos","scene-salaDeLeitos")).setCssClass("scene-bedroom-level1a").onLoad(function(){u.flag("colocou_coxim")==1&&u.setActionVisible("btn-ler_prontuario",!0),u.openCommandBar()}).onUnload(function(){u.closeCommandBar()}),w.registerInteractiveObjects([(new s("io-ir_leito","Ir ao leito")).setCssClass("intObj-ir_leito-fase1").onClick(function(){u.flag("lavarMaos")==0?u.openDialog(0):u.changeScene(3)}).setVisibility(!0),(new s("io-ir_corredor","Ir ao Corredor")).setCssClass("intObj-bedroomToHallway").onClick(function(){u.flag("foi_ao_leito")==0?u.changeScene(1):u.flag("lavar_maos2")==1?u.changeScene(1):u.openDialog(1)}).setVisibility(!0)]),w.registerActions([(new n("btn-lavarMaos","Lavar as mãos")).setCssClass("action-lavarMaos").onClick(function(){v.play(v.audios.sfx.lavarMaos),u.flag("lavarMaos")==0?(u.flag("lavarMaos",!0),u.flag("score_lavar_maos_antes_exame")==0&&(u.registerScoreItem(h.lavarMaosAntes),u.flag("score_lavar_maos_antes_exame",!0))):u.flag("lavar_maos2")==0&&u.flag("examinar_paciente")==1?(u.flag("lavar_maos2",!0),u.flag("score_lavar_maos_depois_exame")==0&&(u.registerScoreItem(h.lavarMaosDepois),u.flag("score_lavar_maos_depois_exame",!0))):u.flag("lavar_maos3")==0&&u.flag("colocou_coxim")==1&&(u.flag("lavar_maos3",!0),u.flag("score_lavar_maos_prontuario")==0&&(u.registerScoreItem(h.lavarMaosProntuario),u.flag("score_lavar_maos_prontuario",!0)))}).setVisibility(!0),(new n("btn-ler_prontuario","Ler prontuario")).setCssClass("action-ler_prontuario").onClick(function(){u.flag("lavar_maos3")==0?u.openDialog(2):(l.open(),u.openModalScene("Prontuario"))}).setVisibility(!1)]),w.registerDialogs([(new i(a.characters.mentor)).setText(d.lavarMaos.tipo1).registerOption("",function(){u.closeDialog()}),(new i(a.characters.mentor)).setText(d.lavarMaos.tipo2).registerOption("",function(){u.closeDialog()}),(new i(a.characters.mentor)).setText(d.lavarMaos.tipo3).registerOption("",function(){u.closeDialog()})]),E=a.scenes.leitos.carlos.getClone().onLoad(function(){u.openCommandBar(),u.flag("examinar_paciente")==0&&u.setInteractiveObjectVisible("io-pulseira_paciente",!0),u.flag("conversar_mentor2")==1&&(u.setActionVisible("btn-examinar_paciente",!1),u.flag("coxim")==1&&(u.flag("mudar_posicao_paciente")==0?u.setActionVisible("btn-mudar_posicao",!0):u.flag("colocou_coxim")==0&&(u.setActionVisible("btn-mudar_posicao",!1),u.setInteractiveObjectVisible("io-pulseira_paciente",!1),u.setActionVisible("btn-posicionar_coxim_e_travesseiro",!0))))}).onUnload(function(){u.closeCommandBar()}),E.registerInteractiveObjects([(new s("io-pulseira_paciente","Checar pulseira do paciente")).setCssClass("intObj-paciente_02-checar_pulseira").onClick(function(){u.openModalScene("pulseira"),f.open(),u.openCommandBar()}).setVisibility(!0).setEnable(!1),(new s("io-conversar_paciente02","Falar com o paciente")).setCssClass("intObj-conversar_paciente").onClick(function(){u.flag("score_falar_paciente")==0&&(u.registerScoreItem(h.falarComPaciente),u.flag("score_falar_paciente",!0)),u.openDialog(0),u.closeCommandBar()}).setVisibility(!0)]),E.registerDialogs([(new i(a.characters.jogador)).setText("").registerOption(p.enfermaria[0],function(){u.openDialog(3)}).registerOption(p.enfermaria[1],function(){u.openDialog(1)}).registerOption(p.enfermaria[3],function(){u.openDialog(2)}).setRandomize(!0),(new i(a.characters.mentor)).setText(p.enfermaria[2]).registerOption("",function(){u.openDialog(0)}),(new i(a.characters.mentor)).setText(p.enfermaria[4]).registerOption("",function(){u.openDialog(0)}),(new i(a.characters.pacientes.carlos)).setText(p.enfermaria[5]).registerOption("",function(){u.openDialog(4)}),(new i(a.characters.jogador)).setText("").registerOption(p.enfermaria[6],function(){u.openDialog(7)}).registerOption(p.enfermaria[7],function(){u.openDialog(5)}).registerOption(p.enfermaria[9],function(){u.openDialog(6)}).setRandomize(!0),(new i(a.characters.mentor)).setText(p.enfermaria[8]).registerOption("",function(){u.openDialog(4)}),(new i(a.characters.mentor)).setText(p.enfermaria[10]).registerOption("",function(){u.openDialog(4)}),(new i(a.characters.pacientes.carlos)).setText(p.enfermaria[11]).registerOption("",function(){u.openDialog(10)}),(new i(a.characters.jogador)).setText(p.perguntarNome).registerOption("",function(){u.openDialog(9)}),(new i(a.characters.pacientes.carlos)).setText(p.enfermaria[11]).registerOption("",function(){u.openCommandBar(),u.closeDialog()}),(new i(a.characters.jogador)).setText(p.enfermaria[12]).registerOption("",function(){u.openCommandBar(),u.closeDialog(),u.flag("conversarPaciente",!0),u.enableInteractiveObject("io-pulseira_paciente",!0),u.setActionVisible("btn-ir_sala_leitos",!0)})]),E.registerActions([(new n("btn-examinar_paciente","Inspecionar Pele")).setCssClass("action-examinar_paciente").onClick(function(){v.play(v.audios.sfx.toquePele),u.openModalScene("zoomChar2"),u.flag("examinar_paciente",!0)}).setVisibility(!1),(new n("btn-perguntar_nome","Perguntar nome do paciente")).setCssClass("action-leito-char-02").onClick(function(){u.closeCommandBar(),u.openDialog(8)}).setVisibility(!1),(new n("btn-ir_sala_leitos","Ir para sala de leitos")).setCssClass("action-ir_sala_de_leitos").onClick(function(){u.flag("examinar_paciente")&&u.disableInteractiveObject("io-pulseira_paciente"),u.changeScene(2)}).setVisibility(!1),(new n("btn-mudar_posicao","Mudar posição do paciente")).setCssClass("action-mudar_posicao_paciente").onClick(function(){v.play(v.audios.sfx.roupaRocando),u.changeSceneCssClassTo("scene-bedChar02-turned"),u.setActionVisible("btn-mudar_posicao",!1),u.setInteractiveObjectVisible("io-pulseira_paciente",!1),u.setActionVisible("btn-posicionar_coxim_e_travesseiro",!0),u.flag("mudar_posicao_paciente",!0)}).setVisibility(!1),(new n("btn-posicionar_coxim_e_travesseiro","Posicionar coxim e travesseiro")).setCssClass("action-posicionar_coxim").onClick(function(){v.play(v.audios.sfx.objetoRocando),u.changeSceneCssClassTo("scene-bedChar02-cushion"),u.setActionVisible("btn-posicionar_coxim_e_travesseiro",!1),u.flag("colocou_coxim",!0)}).setVisibility(!1)]),S=a.scenes.postoDeEnfermagem.getClone().onLoad(function(){u.openCommandBar()}).onUnload(function(){u.closeCommandBar()}),S.registerActions([(new n("btn-ir_corredor","Ir ao corredor")).setCssClass("action-ir_corredor").onClick(function(){u.flag("coxim")==1?u.changeScene(1):u.openDialog(0)}).setVisibility(!0)]),S.registerInteractiveObjects([(new s("io-abrirGaveta","Abrir gaveta")).setCssClass("intObj-openDrawer").onClick(function(){u.flag("pegou_bandeja")!=1?u.openDialog(1):(v.play(v.audios.sfx.abrirGaveta),u.openModalScene("gaveta"),u.openCommandBar(),u.setInteractiveObjectVisible("io-coxim",!u.flag("coxim")))}).setVisibility(!0),(new s("io-pegar_bandeja","Pegar bandeja")).setCssClass("intObj-bandeja").onClick(function(){v.play(v.audios.sfx.pegarObjeto),u.flag("pegou_bandeja",!0),u.setInteractiveObjectVisible("io-pegar_bandeja",!1)}).setVisibility(!0)]),S.registerDialogs([(new i(a.characters.mentor)).setText(d.esqueceu.coxim).registerOption("",function(){u.closeDialog()}),(new i(a.characters.mentor)).setText(d.esqueceu.pegarBandeja).registerOption("",function(){u.closeDialog()})]),C=(new t("zoomChar2","Examinando paciente")).setCssClass("modalScene-zoom-char2"),C.registerActions([(new n("btn-fechar_zoom","Finalizar Inspeção")).setCssClass("action-terminar_exame").onClick(function(){u.closeModalScene("zoomChar2"),u.setActionVisible("btn-ir_sala_leitos",!0),u.flag("score_examinar_paciente")==0&&(u.registerScoreItem(h.examinarPaciente),u.flag("score_examinar_paciente",!0))})]),T=new t("pulseira","pulseira"),T.registerInteractiveObjects([]),T.registerActions([(new n("btn-largar_pulseira","Fechar pulseira")).setCssClass("action-pulseira_paciente").onClick(function(){u.closeModalScene("Pulseira"),u.flag("confirmou_pulseira")==0&&u.flag("conversarPaciente")==1&&(u.flag("confirmou_pulseira",!0),u.setActionVisible("btn-examinar_paciente",!0),u.flag("score_verificar_pulseira")==0&&(u.registerScoreItem(h.verificarPulseira),u.flag("score_verificar_pulseira",!0))),f.close()}).setVisibility(!0)]),x=(new t("gaveta","Gaveta")).setCssClass("modalScene-drawer"),x.registerActions([(new n("btn-fecharGaveta","Fechar gaveta")).setCssClass("action-fecharGaveta").onClick(function(){v.play(v.audios.sfx.fecharGaveta),u.closeModalScene("Gaveta")}).setVisibility(!0)]),x.registerInteractiveObjects([(new s("io-coxim","Coxim")).setCssClass("intObj-cushion").onClick(function(){u.flag("coxim",!0),v.play(v.audios.sfx.pegarObjeto),u.setInteractiveObjectVisible("io-coxim",!1),u.flag("score_pegar_coxim")==0&&(u.registerScoreItem(h.pegarCoxim),u.flag("score_pegar_coxim",!0))}).setVisibility(!0)]),N=new t("Prontuario","Prontuario"),N.registerActions([(new n("btn-fechar_prontuario","Fechar prontuário")).setCssClass("action-ler_prontuario").onClick(function(){l.close(),u.closeModalScene("Prontuario"),u.flag("colocou_coxim")==1&&(u.registerScoreItem(h.anotarNoProntuario),u.unlockLevel(2),u.closeCommandBar(),u.showEndOfLevel(),v.stopAll(),v.play(v.audios.sfx.missaoCumprida))})]),m.registerScene(g),m.registerScene(y),m.registerScene(w),m.registerScene(E),m.registerScene(S),m.registerModalScene(T),m.registerModalScene(x),m.registerModalScene(N),m.registerModalScene(C),m.setSetupScript(function(){f.setNameRegExp(/Carlos Esme Gouv(e|ê)a/),f.setLeitoRegExp(/0*3/),f.setDataRegExp(/01\/12\/1945/),f.setName("Carlos Esme Gouvêa"),f.setLeito("03"),f.setData("01/12/1945"),f.disable(),l.setNome("Carlos Esme Gouvêa"),l.setSexo("M"),l.setEstadoCivil("Casado"),l.setDataNascimento("01/12/1945"),l.setIdade("69 anos"),l.setProfissao("Aposentado (advogado)"),l.setPai("Leonardo Gouvêa"),l.setMae("Maria Clara Esme Gouvêa"),l.setAlergiaMedicamentosa(!1,""),l.setDisableAlergiaMedicamentosa(!0),l.setDataInternacao("15/06/2015"),l.setLeito("02 - Enfermaria Masculina"),l.setAntecedentes("Nenhum"),l.setHipotese("Pneumonia brônquica, insuficiência respiratória e anemia ferropriva."),l.setObservacoes("Possui incontinência urinária, acamado."),l.clearPrescEnfermagemState(),l.setPrescEnfermagemState("decubito"),l.setPeso("72"),l.setAltura("1,68"),l.setCircunferenciaAbdominal("135"),l.setPrescMedicaRowData(0,"","Sulfato ferroso","Oral","drágea 250 mg","2x dia",!0,!0),l.setPrescMedicaRowData(1,"","Azitromicina","Oral","comp 500 mg","1x dia",!0,!0),l.setPrescMedicaRowData(2,"","","","","",!1,!0),l.setPrescMedicaRowData(3,"","","","","",!1,!0),l.setSsvvRowData(0,"","130x80","65","14","94","36",!0),l.setSsvvRowData(1,"","","","","","",!0),l.setAnotacaoEnfermagemRowData("","")}),m.registerFlag(new o("conversar_recepcionista",!1)),m.registerFlag(new o("conversar_mentor",!1)),m.registerFlag(new o("conversar_mentor2",!1)),m.registerFlag(new o("foi_ao_leito",!1)),m.registerFlag(new o("conversarPaciente",!1)),m.registerFlag(new o("confirmou_pulseira",!1)),m.registerFlag(new o("examinar_paciente",!1)),m.registerFlag(new o("mudar_posicao_paciente",!1)),m.registerFlag(new o("lavarMaos",!1)),m.registerFlag(new o("lavar_maos2",!1)),m.registerFlag(new o("lavar_maos3",!1)),m.registerFlag(new o("coxim",!1)),m.registerFlag(new o("colocou_coxim",!1)),m.registerFlag(new o("score_lavar_maos_antes_exame",!1)),m.registerFlag(new o("score_lavar_maos_depois_exame",!1)),m.registerFlag(new o("score_lavar_maos_prontuario",!1)),m.registerFlag(new o("score_ir_posto_hora_errada",!1)),m.registerFlag(new o("score_falar_paciente",!1)),m.registerFlag(new o("score_verificar_pulseira",!1)),m.registerFlag(new o("score_examinar_paciente",!1)),m.registerFlag(new o("score_falar_com_mentor",!1)),m.registerFlag(new o("score_pegar_coxim",!1)),m.registerFlag(new o("score_anotar_prontuario",!1)),m.registerFlag(new o("score_nao_lavar_maos_prontuario",!1)),m.registerFlag(new o("pegou_bandeja",!1)),m.setInitialScene(0),e.registerLevel(m,2)});