/**
 * jquery.mask.js
 * @version: v1.11.4
 * @author: Igor Escobar
 *
 * Created by Igor Escobar on 2012-03-10. Please report any bug at http://blog.igorescobar.com
 *
 * Copyright (c) 2012 Igor Escobar http://blog.igorescobar.com
 *
 * The MIT License (http://www.opensource.org/licenses/mit-license.php)
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */

(function(e){typeof define=="function"&&define.amd?define(["jquery"],e):typeof exports=="object"?module.exports=e(require("jquery")):e(jQuery||Zepto)})(function(e){var t=function(t,n,r){t=e(t);var i=this,s=t.val(),o;n=typeof n=="function"?n(t.val(),undefined,t,r):n;var u={invalid:[],getCaret:function(){try{var e,n=0,r=t.get(0),i=document.selection,s=r.selectionStart;if(i&&navigator.appVersion.indexOf("MSIE 10")===-1)e=i.createRange(),e.moveStart("character",t.is("input")?-t.val().length:-t.text().length),n=e.text.length;else if(s||s==="0")n=s;return n}catch(o){}},setCaret:function(e){try{if(t.is(":focus")){var n,r=t.get(0);r.setSelectionRange?r.setSelectionRange(e,e):r.createTextRange&&(n=r.createTextRange(),n.collapse(!0),n.moveEnd("character",e),n.moveStart("character",e),n.select())}}catch(i){}},events:function(){t.on("keyup.mask",u.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){t.keydown().keyup()},100)}).on("change.mask",function(){t.data("changed",!0)}).on("blur.mask",function(){s!==t.val()&&!t.data("changed")&&t.triggerHandler("change"),t.data("changed",!1)}).on("keydown.mask, blur.mask",function(){s=t.val()}).on("focus.mask",function(t){r.selectOnFocus===!0&&e(t.target).select()}).on("focusout.mask",function(){r.clearIfNotMatch&&!o.test(u.val())&&u.val("")})},getRegexMask:function(){var e=[],t,r,s,o,u,a;for(var f=0;f<n.length;f++)t=i.translation[n.charAt(f)],t?(r=t.pattern.toString().replace(/.{1}$|^.{1}/g,""),s=t.optional,o=t.recursive,o?(e.push(n.charAt(f)),u={digit:n.charAt(f),pattern:r}):e.push(!s&&!o?r:r+"?")):e.push(n.charAt(f).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"));return a=e.join(""),u&&(a=a.replace(new RegExp("("+u.digit+"(.*"+u.digit+")?)"),"($1)?").replace(new RegExp(u.digit,"g"),u.pattern)),new RegExp(a)},destroyEvents:function(){t.off(["keydown","keyup","paste","drop","blur","focusout",""].join(".mask "))},val:function(e){var n=t.is("input"),r=n?"val":"text",i;return arguments.length>0?(t[r]()!==e&&t[r](e),i=t):i=t[r](),i},getMCharsBeforeCount:function(e,t){for(var r=0,s=0,o=n.length;s<o&&s<e;s++)i.translation[n.charAt(s)]||(e=t?e+1:e,r++);return r},caretPos:function(e,t,r,s){var o=i.translation[n.charAt(Math.min(e-1,n.length-1))];return o?Math.min(e+r-t-s,r):u.caretPos(e+1,t,r,s)},behaviour:function(t){t=t||window.event,u.invalid=[];var n=t.keyCode||t.which;if(e.inArray(n,i.byPassKeys)===-1){var r=u.getCaret(),s=u.val(),o=s.length,a=r<o,f=u.getMasked(),l=f.length,c=u.getMCharsBeforeCount(l-1)-u.getMCharsBeforeCount(o-1);return u.val(f),a&&(n!==65||!t.ctrlKey)&&(n!==8&&n!==46&&(r=u.caretPos(r,o,l,c)),u.setCaret(r)),u.callbacks(t)}},getMasked:function(e){var t=[],s=u.val(),o=0,a=n.length,f=0,l=s.length,c=1,h="push",d=-1,v,m;r.reverse?(h="unshift",c=-1,v=0,o=a-1,f=l-1,m=function(){return o>-1&&f>-1}):(v=a-1,m=function(){return o<a&&f<l});while(m()){var g=n.charAt(o),y=s.charAt(f),b=i.translation[g];b?(y.match(b.pattern)?(t[h](y),b.recursive&&(d===-1?d=o:o===v&&(o=d-c),v===d&&(o-=c)),o+=c):b.optional?(o+=c,f-=c):b.fallback?(t[h](b.fallback),o+=c,f-=c):u.invalid.push({p:f,v:y,e:b.pattern}),f+=c):(e||t[h](g),y===g&&(f+=c),o+=c)}var w=n.charAt(v);return a===l+1&&!i.translation[w]&&t.push(w),t.join("")},callbacks:function(e){var i=u.val(),o=i!==s,a=[i,e,t,r],f=function(e,t,n){typeof r[e]=="function"&&t&&r[e].apply(this,n)};f("onChange",o===!0,a),f("onKeyPress",o===!0,a),f("onComplete",i.length===n.length,a),f("onInvalid",u.invalid.length>0,[i,e,t,u.invalid,r])}};i.mask=n,i.options=r,i.remove=function(){var e=u.getCaret();return u.destroyEvents(),u.val(i.getCleanVal()),u.setCaret(e-u.getMCharsBeforeCount(e)),t},i.getCleanVal=function(){return u.getMasked(!0)},i.init=function(n){n=n||!1,r=r||{},i.byPassKeys=e.jMaskGlobals.byPassKeys,i.translation=e.jMaskGlobals.translation,i.translation=e.extend({},i.translation,r.translation),i=e.extend(!0,{},i,r),o=u.getRegexMask();if(n===!1){r.placeholder&&t.attr("placeholder",r.placeholder),t.attr("autocomplete","off"),u.destroyEvents(),u.events();var s=u.getCaret();u.val(u.getMasked()),u.setCaret(s+u.getMCharsBeforeCount(s,!0))}else u.events(),u.val(u.getMasked())},i.init(!t.is("input"))};e.maskWatchers={};var n=function(){var n=e(this),i={},s="data-mask-",o=n.attr("data-mask");n.attr(s+"reverse")&&(i.reverse=!0),n.attr(s+"clearifnotmatch")&&(i.clearIfNotMatch=!0),n.attr(s+"selectonfocus")==="true"&&(i.selectOnFocus=!0);if(r(n,o,i))return n.data("mask",new t(this,o,i))},r=function(t,n,r){r=r||{};var i=e(t).data("mask"),s=JSON.stringify,o=e(t).val()||e(t).text();try{return typeof n=="function"&&(n=n(o)),typeof i!="object"||s(i.options)!==s(r)||i.mask!==n}catch(u){}};e.fn.mask=function(n,i){i=i||{};var s=this.selector,o=e.jMaskGlobals,u=e.jMaskGlobals.watchInterval,a=function(){if(r(this,n,i))return e(this).data("mask",new t(this,n,i))};return e(this).each(a),s&&s!==""&&o.watchInputs&&(clearInterval(e.maskWatchers[s]),e.maskWatchers[s]=setInterval(function(){e(document).find(s).each(a)},u)),this},e.fn.unmask=function(){return clearInterval(e.maskWatchers[this.selector]),delete e.maskWatchers[this.selector],this.each(function(){var t=e(this).data("mask");t&&t.remove().removeData("mask")})},e.fn.cleanVal=function(){return this.data("mask").getCleanVal()},e.applyDataMask=function(t){t=t||e.jMaskGlobals.maskElements;var r=t instanceof e?t:e(t);r.filter(e.jMaskGlobals.dataMaskAttr).each(n)};var i={maskElements:"input,td,span,div",dataMaskAttr:"*[data-mask]",dataMask:!0,watchInterval:300,watchInputs:!0,watchDataMask:!1,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}};e.jMaskGlobals=e.jMaskGlobals||{},i=e.jMaskGlobals=e.extend(!0,{},i,e.jMaskGlobals),i.dataMask&&e.applyDataMask(),setInterval(function(){e.jMaskGlobals.watchDataMask&&e.applyDataMask()},i.watchInterval)});